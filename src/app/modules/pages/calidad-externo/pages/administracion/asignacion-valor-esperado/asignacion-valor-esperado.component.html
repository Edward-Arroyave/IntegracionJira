<h1 style="margin-top: 3em;">Asignación de valores esperado</h1>


<form [formGroup]="formaBuscarDatos" class="form_busqueda">

  <mat-form-field>
    <mat-label>Lote</mat-label>
    <mat-select disableOptionCentering formControlName="lote">
      <mat-option>
        <ngx-mat-select-search [formControl]="filterLotes" placeholderLabel="Buscar lote..."
          noEntriesFoundLabel="No se encontró un resultado">
        </ngx-mat-select-search>
      </mat-option>
      <mat-option *ngFor="let lote of lotes" [value]="lote.IdLot" [matTooltipPosition]="'right'"
        [matTooltip]="lote.Numlot">
        {{ lote.Numlot }}
      </mat-option>
    </mat-select>
    <mat-error>Obligatorio</mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Programa</mat-label>
    <mat-select disableOptionCentering formControlName="programa">
      <mat-option>
        <ngx-mat-select-search [formControl]="filterPrograma" placeholderLabel="Buscar programa..."
          noEntriesFoundLabel="No se encontró un resultado">
        </ngx-mat-select-search>
      </mat-option>
      <mat-option *ngFor="let programa of listaProgramas" [value]="programa.IdProgram" [matTooltipPosition]="'right'"
        [matTooltip]="programa.Desprogram" (click)="getAnalitosxPrograma(programa)">
        {{ programa.Desprogram }}
      </mat-option>
    </mat-select>
    <mat-error>Obligatorio</mat-error>
  </mat-form-field>

  <div>
    <button type="button" class="btnPurple-01" (click)="buscar()" [disabled]="formaBuscarDatos.invalid">
      Buscar <mat-icon>search</mat-icon></button>
  </div>
</form>






<app-tabla-comun [cabeceros]="displayedColumns" [info-tabla]="dataTableBody" [hidden]="!verTabla"
  (onCreate)="modalCrear(crearOeditar)" (onChangeStatus)="editarToggle($event)"
  (onEdit)="modalEditar(crearOeditar, $event)" (onDelete)="eliminarValoresAsign($event)">
</app-tabla-comun>


<ng-template #crearOeditar>

  <form [formGroup]="formCrearEditar" class="grid-3" style="margin-bottom: 1em;">


    <mat-form-field>
      <mat-label>Analito</mat-label>
      <mat-select formControlName="idAnalytes">
        <mat-option>
          <ngx-mat-select-search [formControl]="filterAnalytes" placeholderLabel="Buscar analito..."
            noEntriesFoundLabel="No se encontró un resultado">
          </ngx-mat-select-search>
        </mat-option>
        <mat-option *ngFor="let analito of analitos" [value]="analito.idanalytes" [matTooltipPosition]="'right'"
          [matTooltip]="analito.desanalytes">
          {{ analito.desanalytes}}
        </mat-option>
      </mat-select>
      <mat-error>Obligatorio</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Equipo</mat-label>
      <mat-select formControlName="idAnalyzer">
        <mat-option>
          <ngx-mat-select-search [formControl]="filterAnalizer" placeholderLabel="Buscar equipo..."
            noEntriesFoundLabel="No se encontró un resultado">
          </ngx-mat-select-search>
        </mat-option>
        <mat-option *ngFor="let analyzer of analyzers" [value]="analyzer.idAnalyzer" [matTooltipPosition]="'right'"
          [matTooltip]="analyzer.nameAnalyzer">
          {{ analyzer.nameAnalyzer }}
        </mat-option>
      </mat-select>
      <mat-error>Obligatorio</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Reactivo</mat-label>
      <mat-select formControlName="idReagents">
        <mat-option>
          <ngx-mat-select-search [formControl]="filterReactivo" placeholderLabel="Buscar reactivo..."
            noEntriesFoundLabel="No se encontró un resultado">
          </ngx-mat-select-search>
        </mat-option>
        <mat-option *ngFor="let reactivo of reactivos" [value]="reactivo.idreagents" [matTooltipPosition]="'right'"
          [matTooltipPosition]="'right'" [matTooltip]="reactivo.desreagents">
          {{ reactivo.desreagents }}
        </mat-option>
      </mat-select>
      <mat-error>Obligatorio</mat-error>
    </mat-form-field>


    <mat-form-field>
      <mat-label>Método</mat-label>
      <mat-select formControlName="idMethods">
        <mat-option>
          <ngx-mat-select-search [formControl]="filterMetodo" placeholderLabel="Buscar métodos..."
            noEntriesFoundLabel="No se encontró un resultado">
          </ngx-mat-select-search>
        </mat-option>
        <mat-option *ngFor="let metodo of methodsActive" [value]="metodo.idmethods" [matTooltipPosition]="'right'"
          [matTooltipPosition]="'right'" [matTooltip]=" metodo.desmethods ">
          {{ metodo.desmethods }}
        </mat-option>
      </mat-select>
      <mat-error>Obligatorio</mat-error>
    </mat-form-field>





    <mat-form-field>
      <mat-label>Unidades</mat-label>
      <mat-select formControlName="idUnits">
        <mat-option>
          <ngx-mat-select-search [formControl]="filterUnits" placeholderLabel="Buscar unidades..."
            noEntriesFoundLabel="No se encontró un resultado">
          </ngx-mat-select-search>
        </mat-option>
        <mat-option *ngFor="let unidad of listaUnits" [value]="unidad.idunits" [matTooltipPosition]="'right'"
          [matTooltipPosition]="'right'" [matTooltip]="unidad.codunits">
          {{ unidad.codunits }}
        </mat-option>
      </mat-select>
      <mat-error>Obligatorio</mat-error>
    </mat-form-field>




    <mat-form-field>
      <mat-label>Valor esperado</mat-label>
      <input matInput type="number" formControlName="valueExpected">
      <mat-error>Obligatorio</mat-error>
    </mat-form-field>

    <div class="contieneToggle">
      <label class="labelToggle">Estado</label>
      <mat-slide-toggle formControlName="active" labelPosition="top"></mat-slide-toggle>
    </div>


  </form>
</ng-template>